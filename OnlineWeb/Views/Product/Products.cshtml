@model IEnumerable<OnlineWeb.Models.ViewModels.ProductViewModel>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title  -->
    <title>Amado - Furniture Ecommerce Template | Shop</title>

    <!-- Favicon  -->
    <link rel="icon" href="img/core-img/favicon.ico">

    <!-- Core Style CSS -->
    <link rel="stylesheet" href="/css/core-style.css">
    <link rel="stylesheet" href="/style.css">

</head>

<body>
     

    <!-- ##### Main Content Wrapper Start ##### -->
    <div class="main-content-wrapper d-flex clearfix">
        <div class="shop_sidebar_area">

            <!-- ##### Single Widget ##### -->
            <div class="widget catagory mb-50">
                <!-- Widget Title -->
                <h6 class="widget-title mb-30">Catagories</h6>

                <!--  Catagories  -->
                <div class="catagories-menu">
                    <ul>
    <li class="@("all".Equals(ViewBag.SelectedCategory, StringComparison.OrdinalIgnoreCase) ? "active" : "")">
        <a asp-controller="Product" asp-action="Products" asp-route-category="all">All</a>
    </li>
    <li class="@("chairs".Equals(ViewBag.SelectedCategory, StringComparison.OrdinalIgnoreCase) ? "active" : "")">
        <a asp-controller="Product" asp-action="Products" asp-route-category="chairs">Chairs</a>
    </li>
    <li class="@("beds".Equals(ViewBag.SelectedCategory, StringComparison.OrdinalIgnoreCase) ? "active" : "")">
        <a asp-controller="Product" asp-action="Products" asp-route-category="beds">Beds</a>
    </li>
    <li class="@("accessories".Equals(ViewBag.SelectedCategory, StringComparison.OrdinalIgnoreCase) ? "active" : "")">
        <a asp-controller="Product" asp-action="Products" asp-route-category="accessories">Accessories</a>
    </li>
    <li class="@("furniture".Equals(ViewBag.SelectedCategory, StringComparison.OrdinalIgnoreCase) ? "active" : "")">
        <a asp-controller="Product" asp-action="Products" asp-route-category="furniture">Furniture</a>
    </li>
    <li class="@("home decor".Equals(ViewBag.SelectedCategory, StringComparison.OrdinalIgnoreCase) ? "active" : "")">
        <a asp-controller="Product" asp-action="Products" asp-route-category="home decor">Home Deco</a>
    </li>
    <li class="@("dressings".Equals(ViewBag.SelectedCategory, StringComparison.OrdinalIgnoreCase) ? "active" : "")">
        <a asp-controller="Product" asp-action="Products" asp-route-category="dressings">Dressings</a>
    </li>
    <li class="@("tables".Equals(ViewBag.SelectedCategory, StringComparison.OrdinalIgnoreCase) ? "active" : "")">
        <a asp-controller="Product" asp-action="Products" asp-route-category="tables">Tables</a>
    </li>
</ul>

                </div>
            </div>

            <!-- ##### Single Widget ##### -->
            <div class="widget brands mb-50">
                <!-- Widget Title -->
                <h6 class="widget-title mb-30">Style</h6>

                <div class="widget-desc">
    <!-- Single Form Check for Modern -->
    <form asp-controller="Product" asp-action="Products" asp-route-style="modern" method="get" style="margin-bottom: 20px;">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="style" value="modern" id="modern" 
                @(ViewBag.SelectedStyle == "modern" ? "checked" : "") onchange="this.form.submit();">
            <label class="form-check-label" for="modern">Modern</label>
        </div>
    </form>
    <!-- Single Form Check for Old Fashion -->
    <form asp-controller="Product" asp-action="Products" method="get" style="margin-bottom: 20px;">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="style" value="old-fashion" id="old-fashion" 
                @(ViewBag.SelectedStyle == "old-fashion" ? "checked" : "") onchange="this.form.submit();">
            <label class="form-check-label" for="old-fashion">Old Fashion</label>
        </div>
    </form>
    <!-- Single Form Check for Scandinavian -->
    <form asp-controller="Product" asp-action="Products" method="get" style="margin-bottom: 20px;">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="style" value="scandinavian" id="scandinavian" 
                @(ViewBag.SelectedStyle == "scandinavian" ? "checked" : "") onchange="this.form.submit();">
            <label class="form-check-label" for="scandinavian">Scandinavian</label>
        </div>
    </form>
    <!-- Single Form Check for Minimalist -->
    <form asp-controller="Product" asp-action="Products" method="get" style="margin-bottom: 20px;">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="style" value="minimalist" id="minimalist" 
                @(ViewBag.SelectedStyle == "minimalist" ? "checked" : "") onchange="this.form.submit();">
            <label class="form-check-label" for="minimalist">Minimalist</label>
        </div>
    </form>
    </div>
    
            </div>

            
        </div>

        <div class="amado_product_area section-padding-100">
            <div class="container-fluid">

                <div class="row">
                    <div class="col-12">
                        <div class="product-topbar d-xl-flex align-items-end justify-content-between">
                            <!-- Total Products -->
                            <div class="total-products">
                                <p>Showing 1-8 0f 25</p>
                                <div class="view d-flex">
                                    <a href="#"><i class="fa fa-th-large" aria-hidden="true"></i></a>
                                    <a href="#"><i class="fa fa-bars" aria-hidden="true"></i></a>
                                </div>
                            </div>
                            <!-- Sorting -->
                            <div class="product-sorting d-flex">
                                <div class="sort-by-date d-flex align-items-center mr-15">
                                    <p>Sort by</p>
                                     <form asp-controller="Product" asp-action="SortProducts" method="get">
                                    <input type="hidden" name="category" value="@ViewBag.CurrentCategory" />
                                    <select name="sortOption" id="sortBy" onchange="this.form.submit();">
                                           <option value="">Select</option>
                                           <option value="priceLowToHigh">Price: Low to High</option>
                                           <option value="priceHighToLow">Price: High to Low</option>
                                           <option value="popular">Popular</option>
                                    </select>
                                </form>
                                </div>
                                <div class="view-product d-flex align-items-center">
                                    <p>View</p>
                                    <form action="#" method="get">
                                        <select name="select" id="viewProduct">
                                            <option value="value">12</option>
                                            <option value="value">24</option>
                                            <option value="value">48</option>
                                            <option value="value">96</option>
                                        </select>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                 @foreach (var product in Model)
{
    <!-- Single Product Area -->
    <div class="col-12 col-sm-6 col-md-12 col-xl-6">
        <a asp-controller="Product" asp-action="ProductDetails" asp-route-id="@product.Id" style="color: inherit; text-decoration: none;"> <!-- This line was added -->
            <div class="single-product-wrapper">
                <!-- Product Image -->
                <div class="product-img">
                    @if (product.ImageUrls != null && product.ImageUrls.Any())
                    {
                        <img src="@Url.Content(product.ImageUrls[0])" alt="Product image" style="width: 100%; height: 280px; object-fit: cover;"/>
                    }
                    else
                    {
                        <img src="@Url.Content("~/img/core-img/logo.png")" alt="Default image"/>
                    }
                </div>

                <!-- Product Description -->
                <div class="product-description d-flex align-items-center justify-content-between">
                    <!-- Product Meta Data -->
                    <div class="product-meta-data">
                        <div class="line"></div>
                        <p class="product-price">$@product.Price</p>
                        <h6>@product.ProductName</h6> <!-- Removed anchor tag that was here -->
                    </div>
                    <!-- Ratings & Cart -->
                    <div class="ratings-cart text-right">
                        <div class="ratings">
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                        </div>
                        <div class="cart-container" style="display: flex;">
                            <div class="cart">
                                <form asp-action="Delete" asp-controller="Product" asp-route-id="@product.Id" method="post" onsubmit="return confirmDelete();">
                                    <button type="submit" data-toggle="tooltip" data-placement="left" title="Delete Item" style="background: none; border: none; padding: 0; margin-right: 10px;">
                                        <i class="fas fa-trash" style="color: rgb(27, 22, 22);"></i> 
                                    </button>
                                    @Html.AntiForgeryToken()
                                </form>
                            </div>
                            <div class="cart">
                                <form asp-action="MainAddToCart" asp-controller="Cart" asp-route-productId="@product.Id" asp-route-quantity=1 method="post">
                                    <button type="submit" data-toggle="tooltip" data-placement="left" title="Add To Cart" style="background: none; border: none; padding: 0;margin-right: 10px;">
                                        <i class="fas fa-shopping-cart" style="color: rgb(27, 22, 22);"></i> 
                                    </button>
                                    @Html.AntiForgeryToken()
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </a> <!-- This line was added -->
    </div>
}
                </div>

               <div class="row">
    <div class="col-12">
        <!-- Pagination -->
        <nav aria-label="navigation">
            <ul class="pagination justify-content-end mt-50">
                @if(ViewBag.CurrentPage > 1)
                {
                    <li class="page-item">
                        <a class="page-link" href="@Url.Action("Products", new { category = ViewBag.SelectedCategory , page = ViewBag.CurrentPage - 1 })">Pre</a>
                    </li>
                }

                @for(int i = 1; i <= ViewBag.TotalPages; i++)
                {
                    <li class="page-item @(i == ViewBag.CurrentPage ? "active" : "")">
                        <a class="page-link" href="@Url.Action("Products", new { category = ViewBag.SelectedCategory , page = i })">@i</a>
                    </li>
                }

                @if(ViewBag.CurrentPage < ViewBag.TotalPages)
                {
                    <li class="page-item">
                        <a class="page-link" href="@Url.Action("Products", new {category = ViewBag.SelectedCategory,page = ViewBag.CurrentPage + 1 })">Next</a>
                    </li>
                }
            </ul>
        </nav>
    </div>
</div>

            </div>
        </div>
    </div>
    <!-- ##### Main Content Wrapper End ##### -->

    

    <!-- ##### jQuery (Necessary for All JavaScript Plugins) ##### -->
    <script src="/js/jquery/jquery-2.2.4.min.js"></script>
    <!-- Popper js -->
    <script src="/js/popper.min.js"></script>
    <!-- Bootstrap js -->
    <script src="/js/bootstrap.min.js"></script>
    <!-- Plugins js -->
    <script src="/js/plugins.js"></script>
    <!-- Active js -->
    <script src="/js/active.js"></script>
    <script>
        function confirmDelete() {
     return confirm('Are you sure you want to delete this item?');
   }
    </script>
</body>

</html>